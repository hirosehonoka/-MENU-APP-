# 献立作成アプリデータベース設計書

作成日：2025/9/23
版：初版
作成者：廣瀬萌花

### データベース構成

menuapp_db
|テーブル名|和名|備考|
|:--|:--|:--|
|user|ユーザテーブル|ユーザの情報を格納|
|menu|献立テーブル|献立の情報を格納|
|recipes|レシピテーブル|レシピの情報を格納|
|recipeItems|食材テーブル|レシピに使用される食材の情報を格納|
|recipeNutritions|レシピ栄養テーブル|レシピに含まれる栄養素量の情報を格納|
|nutritionalTargets|目標栄養テーブル|年齢・性別・運動レベルごとの目標栄養素量の情報を格納|
|itemWeights|食材重量テーブル|特定の食材の１個あたりの重量を格納|
|itemEquals|食材紐付テーブル|食材テーブルでは違う食材として格納しているが実際には同じ食材を使用する食材(卵とゆで卵)を格納|
|recipeUrl|レシピURLテーブル|レシピのURLを格納。アプリでの表示に使用する。|

### user

ユーザに対するテーブル

|フィールド名|和名|型|主キー|NULL|その他制約|備考|
|:--|:--|:--|:--|:--|:--|:--|
|userId|ユーザID|integer|〇|NO|PRIMARY_KEY, AUTO_INCREMENT||
|userName|ユーザ名|character varying(20)||NO|UNIQUE||
|password|パスワード|character varying(200)||NO||保存時にはハッシュ化する|
|userInfo|ユーザ情報|jsonb||NO|||

テーブル例
|userId|userName|passwprd|userInfo|
|:--|:--|:--|:--|
|1|hirohono|scrypt:ハッシュ化後の値|{
"年齢": "18~29(歳)",
  "性別": "女性",
  "運動レベル": "ふつう"
}|

### posts

投稿に対するテーブル

|フィールド名|和名|型|主キー|NULL|その他制約|備考|
|:--|:--|:--|:--|:--|:--|:--|
|post_id|投稿ID|INTEGER|〇|NO|PRIMARY_KEY, AUTO_INCREMENT||
|created_at|作成日時|DATETIME||NO|||
|updated_at|更新日時|DATETIME||YES|||
|post_title|投稿タイトル|VARCHAR(200)||NO|||
|post_text|投稿内容|TEXT||NO|||
|user_id|投稿者のユーザID|INTEGER||NO|FOREIGN_KEY|usersテーブルに対する外部キー|

