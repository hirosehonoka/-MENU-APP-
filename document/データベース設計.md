# 献立作成アプリデータベース設計書

作成日：2025/9/23
版：初版
作成者：廣瀬萌花

### データベース構成

menuapp_db
|テーブル名|和名|備考|
|:--|:--|:--|
|user|ユーザテーブル|ユーザの情報を格納|
|menu|献立テーブル|献立の情報を格納|
|recipes|レシピテーブル|レシピの情報を格納|
|recipeItems|食材テーブル|レシピに使用される食材の情報を格納|
|recipeNutritions|レシピ栄養テーブル|レシピに含まれる栄養素量の情報を格納|
|nutritionalTargets|目標栄養テーブル|年齢・性別・運動レベルごとの目標栄養素量の情報を格納|
|itemWeights|食材重量テーブル|特定の食材の１個あたりの重量を格納|
|itemEquals|食材紐付テーブル|食材テーブルでは違う食材として格納しているが実際には同じ食材を使用する食材(卵とゆで卵)を格納|
|recipeUrl|レシピURLテーブル|レシピのURLを格納。アプリでの表示に使用する。|

### user

ユーザに対するテーブル

|フィールド名|和名|型|主キー|NULL|その他制約|備考|
|:--|:--|:--|:--|:--|:--|:--|
|userId|ユーザID|integer|〇|NO|PRIMARY_KEY, AUTO_INCREMENT||
|userName|ユーザ名|character varying(20)||NO|UNIQUE||
|password|パスワード|character varying(200)||NO||保存時にはハッシュ化する|
|userInfo|ユーザ情報|jsonb||NO||ユーザの年齢・性別・運動レベルをまとめて格納|

テーブル例
|userId|userName|passwprd|userInfo|
|:--|:--|:--|:--|
|1|hirohono|scrypt:ハッシュ化後の値|{"年齢": "18~29(歳)","性別": "女性","運動レベル": "ふつう"}|

### menu

献立に対するテーブル

|フィールド名|和名|型|主キー|NULL|その他制約|備考|
|:--|:--|:--|:--|:--|:--|:--|
|menuId|献立ID|integer|〇|NO|PRIMARY_KEY, AUTO_INCREMENT||
|menu1|献立1|jsonb||NO||1日目の献立|
|menu2|献立2|jsonb||NO||2日目の献立|
|menu3|献立3|jsonb||NO||3日目の献立|
|menu4|献立4|jsonb||NO||4日目の献立|
|menu5|献立5|jsonb||NO||5日目の献立|
|menu6|献立6|jsonb||NO||6日目の献立|
|menu7|献立7|jsonb||NO||7日目の献立|
|userName|ユーザ名|character varying(20)||NO||献立作成を依頼したユーザ名|
|createAt|作成日時|DateTime||NO|||

テーブル例
|menuId|menu1|menu2|menu3|menu4|menu5|menu6|menu7|userName|createAt|
|:--|:--|:--|:--|:--|:--|:--|:--|:--|:--|
|1|{"main": 1000017354,"side": 1020004944, "soup": 1010018234,"staple": 1000000000}|{"main": 1000017354,"side": 1020004944, "soup": 1010018234,"staple": 1000000000}|{"main": 1000017354,"side": 1020004944, "soup": 1010018234,"staple": 1000000000}|{"main": 1000017354,"side": 1020004944, "soup": 1010018234,"staple": 1000000000}|{"main": 1000017354,"side": 1020004944, "soup": 1010018234,"staple": 1000000000}|{"main": 1000017354,"side": 1020004944, "soup": 1010018234,"staple": 1000000000}|{"main": 1000017354,"side": 1020004944, "soup": 1010018234,"staple": 1000000000}|hirohono|2025-09-18 00:00:00|




